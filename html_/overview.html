<!--This template is based on: https://dribbble.com/shots/6531694-Marketing-Dashboard by Gregoire Vella -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dashboard - 45</title>
    <meta name="description" content="description here">
    <meta name="keywords" content="keywords,here">

    <link href="/font/css/all.css" rel="stylesheet">
    <link href="/css/tailwind.css" rel="stylesheet">
    <script src="/env/env.js"></script>

    <!-- sidebar -->
    <style>
        #sidebar {
            transition: ease-in-out all .1s;
            z-index: 9999;
        }

        #sidebar span {
            opacity: 0;
            position: absolute;
            transition: ease-in-out all .1s;
        }

        #sidebar:hover {
            width: 180px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            /*shadow-2xl*/
        }

        #sidebar:hover span {
            opacity: 1;
        }
    </style>

</head>

<body class="flex bg-gray-100 select-none font-sans" onload="datashower()">

    <!-- Side bar-->
    <div id="sidebar" class="h-screen w-16 menu bg-white text-white px-4 flex items-center static fixed shadow">

        <ul class="list-reset">
            <li class="my-2 md:my-0">
                <a href="/dashboard"
                    class="block my-3 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fa fa-chevron-left fa-fw mr-3 text-xl"></i><span
                        class="w-full inline-block text-lg">Dashboard</span>
                </a>
            </li>
            <li class="my-2 md:my-0">
                <a href="/overview"
                    class="block my-3 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fas fa-heartbeat fa-fw mr-3 text-indigo-400 text-xl"></i><span
                        class="w-full inline-block text-lg">Overview</span>
                </a>
            </li>
            <li class="my-2 md:my-0">
                <a id="alarm_icon" href="/io_alarm"
                    class="block my-3 md:py-3 pl-1 uppercase hidden align-middle text-gray-900 no-underline hover:text-indigo-400">
                    <i class="fa fa-exclamation-triangle mr-3 text-2xl text-red-500"></i>
                </a>
            </li>


        </ul>

    </div>

    <div class="flex flex-1 h-screen max-w-full ">

        <!--Graph Content -->
        <div id="main-content" class="w-full flex-1">

            <div class="flex flex-1 flex-wrap">
                <div class="w-full ">

                    <img src="/image/bg" alt="">
                 

                </div>

            </div>

        </div>

    </div>

    <script>
        async function fetchalarm() {
                fetch(rawpayload)
                    .then((resp) => resp.json()) // Transform the data into json
                    .then(function (data) {
                        // Here you get the data to modify as you please
                        // data.connection == false ? alert("[ CHECK PLC CONNECTION ]") : 

                        payload = data
                        // console.log(payload.alarm[0])

                        if (payload.alarm[30] === true) {
                            const div1 = document.getElementById("alarm_icon").classList.remove('hidden');
                        } else if (payload.alarm[30] === false) {
                            const div1 = document.getElementById("alarm_icon").classList.add('hidden');
                        }

                    })
                    .catch(function (error) {
                        // console.log("[ PAYLOAD FETCH ERROR ]", error)
                    });
            };

            function datashower() {

                    // check()
                    setInterval(() => {
                        // fetchstats();
                        // fetchmain();
                        // fetchcompression();
                        fetchalarm()
                    }, 400);
                }
    </script>

</body>

</html>
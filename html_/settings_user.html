<!--This template is based on: https://dribbble.com/shots/6531694-Marketing-Dashboard by Gregoire Vella -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dashboard - 45</title>
    <meta name="description" content="description here">
    <meta name="keywords" content="keywords,here">

    <link href="/font/css/all.css" rel="stylesheet">
    <link href="/css/tailwind.css" rel="stylesheet">
    <script src="/env/env.js"></script>
    
    <!-- sidebar -->
    <style>
        #sidebar {
            transition: ease-in-out all .1s;
            z-index: 9999;
        }
    
        #sidebar span {
            opacity: 0;
            position: absolute;
            transition: ease-in-out all .1s;
        }
    
        #sidebar:hover {
            width: 180px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            /*shadow-2xl*/
        }
    
        #sidebar:hover span {
            opacity: 1;
        }
    </style>

    <!-- Modal CSS -->
    <style>
        .modal {
            transition: opacity 0.25s ease;
        }
    
        body.modal-active {
            overflow-x: hidden;
            overflow-y: visible !important;
        }
    </style>

</head>

<body class="flex bg-gray-100 select-none font-sans">

    <!-- Side bar-->
    <div id="sidebar" class="h-screen w-16 menu bg-white text-white px-4 flex items-center nunito static fixed shadow">

        <ul class="list-reset">
            <li class="my-2 md:my-0">
                <a href="/dashboard"
                    class="block my-3 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fas fa-chevron-left fa-fw mr-3 text-xl"></i><span class="w-full inline-block text-lg">Dashboard</span>
                </a>
            </li>
            <li class="my-2 md:my-0">
                <a href="/settings_user"
                    class="block my-3 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fas fa-user-circle fa-fw mr-3 text-xl"></i><span class="w-full inline-block text-lg">User Setting</span>
                </a>
            </li>
            
        </ul>

    </div>

    <div class="flex flex-row flex-wrap flex-1 flex-grow content-start pl-16">

        <div class="w-1/2">
        
        <!--Graph Content -->
        <div id="main-content" class="w-full flex-1">
        
            <div class="flex flex-1 flex-wrap">
                <div class="w-full p-6 ">
                
                    <!-- Search: Parameters -->
                    <div class="border-b mt-2 p-3">
                        <h5 class="font-bold text-black">User Level:</h5>
                    </div>

                    <div class="flex grid grid-cols-3 p-3 ">
                    
                    
                        <div class="flex flex-col">
                            <div class="flex flex-row">
                                <div class="pt-3">
                                    <select class="text-2xl text-gray-700" name="roller" id="roller">
                                        <option value="0" onclick="level()">0: Operator</option>
                                        <option value="1" onclick="level()">1: Supervisor</option>
                                        <option value="2" onclick="level()">2: Maintainence</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    
                        <div class="p-3">
                            <button id="searchbatch"
                                class="bg-blue-100 uppercase text-sm hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-5 border border-blue-500 hover:border-transparent rounded"
                                onclick="level()">
                                SEARCH
                            </button>
                        </div>
                    </div>

                    <!-- Search: Parameters -->
                    <div class="border-b mt-2 p-3">
                        <h5 class="font-bold text-black">Search User:</h5>
                    </div>
                
                    <div class="flex grid grid-cols-2 p-3 ">
                        
                        <div class="flex flex-col">
                            <h3> User Name </h3>
                            <div class="flex flex-row">
                                <div class="py-3">
                                    <input id="susername"
                                        class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                        type="text" placeholder="">
                                </div>
                                <div class="p-3">
                                    <button id="searchbatch"
                                        class="bg-blue-100 uppercase text-sm hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-5 border border-blue-500 hover:border-transparent rounded"
                                        onclick="searchuser()">
                                        SEARCH
                                    </button>
                                </div>
                            </div>
                        </div>
                    
                    </div>

                    <!-- Action:  -->
                    <div class="border-b mt-2 p-3">
                        <h5 class="font-bold text-black">Action:</h5>
                    </div>
                    
                    <div class="flex grid grid-cols-3 p-3 ">
                    
                        <div class="flex flex-wrap p-3">
                    
                            <!-- PDF report Button -->
                            <div class="py-3">
                                <button id="generatepdfreport"
                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-10 border border-blue-500 hover:border-transparent rounded"
                                    onclick="adduser()">
                                    Add
                                </button>
                            </div>
                        </div>
                    
                        <div class="flex flex-wrap p-3">
                    
                            <!-- Excel Button -->
                            <div class="py-3">
                                <button
                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-10 border border-blue-500 hover:border-transparent rounded"
                                    onclick="edituser()">
                                    Edit
                                </button>
                            </div>
                        </div>
                    
                        <div class="flex flex-wrap p-3">
                    
                            <!-- Excel Button -->
                            <div class="py-3">
                                <button
                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-10 border border-blue-500 hover:border-transparent rounded"
                                    onclick="deleteuser()">
                                    Deactivate
                                </button>
                            </div>
                        </div>
                    
                        <div class="flex flex-wrap p-3">
                    
                            <!-- Excel Button -->
                            <div class="py-3">
                                <button
                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-10 border border-blue-500 hover:border-transparent rounded"
                                    onclick="unblock()">
                                    Unblock
                                </button>
                            </div>
                        </div>
                    
                        <div class="flex flex-wrap p-3">
                    
                            <!-- Excel Button -->
                            <div class="py-3">
                                <button
                                    class="modal1-open text-center text-xl bg-blue-100 uppercase text-gray-800 font-semibold py-2 px-5 border border-blue-500 rounded"
                                    onclick=""> Permissions</button>
                            </div>
                        </div>
                    
                        

                    </div>
                
                    <!-- Search: Parameters -->
                    <div class="border-b p-3">
                        <h5 class="font-bold text-black">User Details:</h5>
                    </div>
                
                    <div class="flex grid grid-cols-3 p-3 ">
                    
                        <div class="flex flex-col">
                            <h3> User Name </h3>
                            <div class="flex flex-row">
                                <div class="py-3">
                                    <input id="username"
                                        class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                        type="text" placeholder="" >
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex flex-col">
                            <h3> Name </h3>
                            <div class="flex flex-row">
                                <div class="py-3">
                                    <input id="name"
                                        class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                        type="text" placeholder="">
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex flex-col">
                            <h3> Userlevel </h3>
                            <div class="flex flex-row">
                                <div class="py-3">
                                    <select class="text-2xl" name="userlevel" id="userlevel">
                                        <option value="0">Operator</option>
                                        <option value="1">Supervisor</option>
                                        <option value="2">Maintainence</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex flex-col">
                            <h3> Login Attempts </h3>
                            <div class="flex flex-row">
                                <div class="py-3">
                                    <input id="attempts"
                                        class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                        type="text" placeholder="">
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex flex-col">
                            <h3> Password </h3>
                            <div class="flex flex-row">
                                <div class="py-3">
                                    <input id="password"
                                        class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                        type="password" placeholder="">
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex flex-col">
                            <h3> Confirm Password </h3>
                            <div class="flex flex-row">
                                <div class="py-3">
                                    <input id="cpassword"
                                        class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                        type="password" placeholder="">
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex flex-col">
                            <h3> Password expiry time (days) </h3>
                            <div class="flex flex-row">
                                <div class="py-3">
                                    <input id="expiry"
                                        class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                        type="text" placeholder="">
                                </div>
                            </div>
                        </div>
                    
                    </div>

                    <div class="flex grid grid-cols-4 p-3 ">
                    
                        <div class="flex flex-wrap ">
                    
                            <!-- PDF report Button -->
                            <div class="py-3">
                                <button id=""
                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-10 border border-blue-500 hover:border-transparent rounded"
                                    onclick="details()">
                                    Submit
                                </button>
                            </div>
                        </div>
                    
                    </div>
                
                    
                </div>
            

            </div>
        
        </div>
        </div>
        
        <div class="w-1/2">
        
        <!--Graph Content -->
        <div id="main-content" class="w-full flex-1">
        
            <div class="flex flex-1 flex-wrap">
                <div class="w-full p-2 ">
                
                    <div class="max-w-full">

                        <!-- Rotation Avg List -->
                        <div class="w-full p-3">
                            <div class="border border-gray-400 rounded shadow overflow-auto">
                                <div class="border-b border-gray-400 p-3">
                                    <h5 class="font-bold uppercase text-center text-3xl text-black">User List
                                    </h5>
                                </div>
                                <div class="px-5 pb-5">
                                    <table class="table-auto w-full text-center text-black" height="170rem">
                                        <thead>
                                            <tr>
                                                <th class="text-center border-b py-3">Username</th>
                                                <th class="text-center border-b py-3">Name</th>
                                                <th class="text-center border-b py-3">Login Attempts</th>
                                                <th class="text-center border-b py-3">Password Expiry (days)</th>
                                            </tr>
                                        </thead>

                                        <tbody id="userlist">
                                        
                                        </tbody>
                                    </table>
                               </div>
                            </div>
                        </div>
                    </div>

                
                </div>
            
            </div>
        
            <!--Modal 1 - Table-->
            <div class="modal1 opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center">
                <div class="modal1-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
            
                <div class="modal1-container bg-white w-4/5 mx-auto rounded shadow-lg z-50 overflow-y-auto">
            
                    <!-- Add margin if you want to see some of the overlay behind the modal1-->
                    <div class="modal1-content py-4 text-center px-6">
            
                      
                        <div class="p-5 border border-gray-400 rounded shadow">
                            <table class="w-full p-5 text-xl text-gray-700">
                                <thead>
                                    <tr>
                                        <th class="text-center text-blue-900"></th>
                                        <th class="text-center text-blue-900">Operator</th>
                                        <th class="text-center text-blue-900">Supervisor</th>
                                        <th class="text-center text-blue-900">Maintainence</th>
                                        <th class="text-center text-blue-900">Administrator</th>
                                        
                                    </tr>
                                </thead>
        
                                <tbody>
                                    <tr>
                                        <td class="text-center border-b border-gray-400 uppercase py-2 font-bold text-blue-900">
                                            Dashboard
                                        </td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                    </tr>
                                    <tr>
                                        <td class="text-center border-b border-gray-400 uppercase py-2 font-bold text-blue-900">
                                            Graph LHS & RHS
                                        </td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                    </tr>
                                    <tr>
                                        <td class="text-center border-b border-gray-400 uppercase py-2 font-bold text-blue-900">
                                            History
                                        </td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                    </tr>
                                    <tr>
                                        <td class="text-center border-b border-gray-400 uppercase py-2 font-bold text-blue-900">
                                            DI/DO
                                        </td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                    </tr>
                                    <tr>
                                        <td class="text-center border-b border-gray-400 uppercase py-2 font-bold text-blue-900">
                                            Maintainence
                                        </td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                    </tr>
                                    <tr>
                                        <td class="text-center border-b border-gray-400 uppercase py-2 font-bold text-blue-900">
                                            Reports
                                        </td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                    </tr>
                                    <tr>
                                        <td class="text-center border-b border-gray-400 uppercase py-2 font-bold text-blue-900">
                                            Process Setup
                                        </td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                    </tr>
                                    <tr>
                                        <td class="text-center border-b border-gray-400 uppercase py-2 font-bold text-blue-900">
                                            AWC Setup
                                        </td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                        <td class="border-b text-center border-gray-400"></td>
                                    </tr>
                                    <tr>
                                        <td class="text-center  border-gray-400 uppercase py-2 font-bold text-blue-900">
                                            Punch Settings
                                        </td>
                                        <td class=" text-center border-gray-400"></td>
                                        <td class=" text-center border-gray-400"></td>
                                        <td class=" text-center border-gray-400"></td>
                                        <td class=" text-center border-gray-400"></td>
                                        <td class=" text-center border-gray-400"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
        
                    
            
                        <!--Footer-->
                        <div class="flex justify-end mt-3">
                            <button
                                class="modal1-close px-4 bg-indigo-500 p-3 rounded-lg text-white hover:bg-indigo-400">Close</button>
                        </div>
            
                    </div>
                </div>
            </div>
            
        </div>
        </div>
    </div>

    
    <!-- modal 1 script -->
    <script>
        var openmodal1 = document.querySelectorAll('.modal1-open')
        for (var i = 0; i < openmodal1.length; i++) {
            openmodal1[i].addEventListener('click', function (event) {
                event.preventDefault()
                togglemodal1()
            })
        }

        const overlay1 = document.querySelector('.modal1-overlay')
        overlay1.addEventListener('click', togglemodal1)

        var closemodal1 = document.querySelectorAll('.modal1-close')
        for (var i = 0; i < closemodal1.length; i++) {
            closemodal1[i].addEventListener('click', togglemodal1)
        }

        document.onkeydown = function (evt) {
            evt = evt || window.event
            var isEscape = false
            if ("key" in evt) {
                isEscape = (evt.key === "Escape" || evt.key === "Esc")
            } else {
                isEscape = (evt.keyCode === 27)
            }
            if (isEscape && document.body.classList.contains('modal1-active')) {
                togglemodal1()
            }
        };

        function togglemodal1() {
            const body = document.querySelector('body')
            const modal1 = document.querySelector('.modal1')
            modal1.classList.toggle('opacity-0')
            modal1.classList.toggle('pointer-events-none')
            body.classList.toggle('modal1-active')
        }

    </script>

    <!-- Update Batch details -->
    <script>
        level()
        async function level() {
            var value = document.getElementById("roller").value
            const batchResponse = await fetch(`${userlistURL}/${value}`);
            const batch = await batchResponse.json();

            // document.getElementById("batchcount").innerHTML = batch.batchcount;

            console.log(batch);

            let batchlistt = batch.data;

            loadbatchlist();

            function loadbatchlist() {
                const batchListBody = document.getElementById('userlist');
                let batchHTML = '';
                for (let batchh of batchlistt) {
                    batchHTML += `<tr><td class="border border-gray-400 px-4 py-2">${batchh[6]}</td><td class="border border-gray-400 px-4 py-2">${batchh[3]}</td><td class="border border-gray-400 px-4 py-2">${batchh[1]}</td><td class="border border-gray-400 px-4 py-2">${batchh[2]}</td></tr>`
                }

                batchListBody.innerHTML = batchHTML;
            }
        }
    
        async function searchuser() {
            var value = document.getElementById("susername").value
            const batchResponse = await fetch(`${usersearchURL}/${value}`);
            const batch = await batchResponse.json();

            // document.getElementById("batchcount").innerHTML = batch.batchcount;

            console.log(batch.data);

            let batchlistt = batch.data[0];

            console.log(batchlistt[0])

            document.getElementById("username").value = batchlistt[6]
            // document.getElementById("name").value
            // document.getElementById("attempts").value
            // document.getElementById("password").value
            // document.getElementById("expiry").value
            // document.getElementById("cpassword").value
            // document.getElementById("userlevel").value

            
        }
    
        
    </script>
    
    <!-- PAYLOAD API fetch -->
    <script>
        
        function details() {
            var a = document.getElementById("username").value
            var b = document.getElementById("name").value
            var c = document.getElementById("attempts").value
            var d = document.getElementById("password").value
            var e = document.getElementById("expiry").value
            var f = document.getElementById("cpassword").value
            var g = document.getElementById("userlevel").value
            
            d == f ? adduser() : alert("Password did not match")
            
            async function adduser() {
                let submiturl = `${adduserURL}/${a}/${b}/${parseInt(c)}/${d}/${parseInt(e)}/${parseInt(g)}`
                await fetch(submiturl)
                    .then(() => alert("User added sucessfully."))
                    .catch(console.error);
            }
            }
        
    </script>

    <!-- Update System info -->
    <script>
        function roller() {

            var value = document.getElementById("roller").value

            submitt(parseInt(value))

            async function submitt(value) {
                let submiturl = `${seturl}/ROLLER_MOTOR_SELECTION/${value}`

                await fetch(submiturl)
                    .then(check())
                    .catch(console.error);
            }
        }

    </script>

</body>

</html>
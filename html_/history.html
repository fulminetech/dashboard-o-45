<!--This template is based on: https://dribbble.com/shots/6531694-Marketing-Dashboard by Gregoire Vella -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dashboard - 45</title>
    <meta name="description" content="description here">
    <meta name="keywords" content="keywords,here">

    <link href="/font/css/all.css" rel="stylesheet">
    <link href="/css/tailwind.min.css" rel="stylesheet">
    <script src="/charts/Chart.bundle.min.js"></script>
    <script src="/env/env.js"></script>
    
    <!-- sidebar -->
    <style>
        #sidebar {
            transition: ease-in-out all .1s;
            z-index: 9999;
        }
    
        #sidebar span {
            opacity: 0;
            position: absolute;
            transition: ease-in-out all .1s;
        }
    
        #sidebar:hover {
            width: 180px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            /*shadow-2xl*/
        }
    
        #sidebar:hover span {
            opacity: 1;
        }
    </style>

    <!-- Modal CSS -->
    <style>
        .modal {
            transition: opacity 0.25s ease;
        }
    
        body.modal-active {
            overflow-x: hidden;
            overflow-y: visible !important;
        }
    </style>

    <!-- Toggle Button CSS -->
    <style>
        .toggle__dot {
            top: -.25rem;
            left: -.25rem;
            transition: all 0.3s ease-in-out;
        }
    
        input:checked~.toggle__dot {
            transform: translateX(100%);
            background-color: #48bb78;
        }
    </style>

</head>

<body class="flex bg-gray-100 select-none font-sans">

    <!-- Side bar-->
    <div id="sidebar" class="h-screen w-16 menu bg-white text-white px-4 flex items-center nunito static fixed shadow">

        <ul class="list-reset">
            <li class="my-2 md:my-0">
                <a href="/dashboard" class="block py-1 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fas fa-home fa-fw mr-3 text-xl"></i><span class="w-full inline-block text-lg">Dashboard</span>
                </a>
            </li>
            <li class="my-2 md:my-0">
                <a href="/graphLHS" class="block py-1 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fas fa-chart-area fa-fw mr-3 text-xl"></i><span
                        class="w-full inline-block text-lg">Graph: LHS</span>
                </a>
            </li>
            <li class="my-2 md:my-0">
                <a href="/graphRHS" class="block py-1 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fas fa-chart-area fa-fw mr-3 text-xl"></i><span class="w-full inline-blocktext-lg">Graph: RHS</span>
                </a>
            </li>
            <li class="my-2 md:my-0">
                <a href="/history" class="block py-1 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fas fa-history fa-fw mr-3 text-indigo-400 text-xl"></i><span class="w-full pb-1 text-lg">History</span>
                </a>
            </li>
            <li class="my-2 md:my-0">
                <a href="/dido" class="block py-1 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fas fa-exchange-alt fa-fw mr-3 text-xl"></i><span class="w-full inline-blocktext-lg">DI/DO</span>
                </a>
            </li>
            <li class="my-2 md:my-0">
                <a href="/analytics" class="block py-1 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fas fa-folder fa-fw mr-3 text-xl"></i><span class="w-full inline-block text-lg">Reports</span>
                </a>
            </li>
            <li class="my-2 md:my-0">
                <a href="/settings" class="block py-1 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fa fa-wrench fa-fw mr-3 text-xl"></i><span class="w-full inline-block text-lg">Settings</span>
                </a>
            </li>
            

        </ul>

    </div>

    <div class="flex flex-1 flex-grow content-start pl-16">

        
        <!--Dash Content -->
        <div id="dash-content" class="bg-green-300 py-3 px-2 lg:py-0 w-full xl:w-64 lg:max-w-sm content-start">
            
            <!-- Batch Number -->
            <div class="w-1 w-full">
                <div
                    class="border-2 border-gray-900 border-dashed hover:border-transparent hover:bg-white hover:shadow-xl rounded px-6 py-3 m-2 md:mx-10 md:my-6">
                    <div class="flex flex-col text-center">
                        <div class="flex-1 items-center">
                            <h5 class="font-bold uppercase text-gray-700">Batch Number</h5>
                            <h3 id="currentbatch" class="font-bold text-2xl">NOT SET</h3>
                            <!-- <a id="currentbatch" class="font-bold text-xl text-black">
                            </a> -->
                        </div>
                    </div>
                </div>
            </div>

                        <!-- Mode -->
            <div class="w-1 w-full">
                <div
                    class="border-2 border-gray-900 border-dashed hover:border-transparent hover:bg-white hover:shadow-xl rounded px-3 py-3 m-2 md:mx-10 md:my-6">
                    <div class="flex flex-col text-center">
                        <div class="flex-1 items-center">
                            <h5 class="font-bold uppercase text-xl text-gray-700">MODE</h5>
                            <h3 id="mode_metric" class="font-bold text-2xl"></h3>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Rotation Number -->
            <!-- Data Table -->
            <!-- <div class="w-1 w-full">
                <div
                    class="border-2 border-gray-400 border-dashed hover:border-transparent hover:bg-white hover:shadow-xl rounded px-3 py-3 mt-3 ">
                    <div class="flex flex-col text-center">
                        <div class="flex-1 items-center">
                            <h5 class="font-bold uppercase text-gray-700">Total Data</h5>
                            <h3 id="rotation_number_metric" class="font-bold text-2xl">0</h3>
                        </div>
                        <div class="p-2">
                            <button
                                class="modal1-open text-center bg-blue-100 uppercase text-sm hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-4 border border-purple-500 hover:border-transparent rounded"
                                onclick=""> TABLE </button>
                        </div>
                    </div>
                </div>
            </div> -->
            
            <!-- Input -->
            <!-- <div class="border-b p-3">
                <h5 class="font-bold text-black">Enter Data Number:</h5>
            </div>
            <div class="flex flex-wrap p-3">
                <input id="searchRotationNumber"
                    class="bg-white focus:outline-none focus:shadow-2xl border border-gray-300 rounded-lg py-2 px-2 block "
                    type="number" placeholder="" onkeydown="if (event.keyCode == 13) search()">
            </div>
            <div class="flex-wrap flex p-3">
                <button id="searchbatch"
                    class="bg-blue-100 uppercase text-sm hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-2 border border-blue-500 hover:border-transparent rounded"
                    onclick="search()">
                    SEARCH
                </button>
            </div> -->
        </div>

        <!--Graph Content -->
        <div id="main-content" class="w-full flex-1">

            <div class="flex flex-1 flex-wrap">

                <div class="w-full xl:w-full p-6">
                    <!--"Container" for the graphs"-->
                    <div class="w-full  ">

                        <!-- Search: Parameters -->
                        <div class="border-b mt-2 p-3">
                            <h5 class="font-bold text-black">Search: Parameters</h5>
                        </div>
                        
                        <div class="flex grid grid-cols-3 p-3 ">
                        
                            <div class="flex flex-col">
                                <h3> Data Number </h3>
                                <div class="flex flex-row">
                                    <div class="py-3">
                                        <input id="searchRotationNumber"
                                            class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                            type="number" placeholder="" onkeydown="if (event.keyCode == 13) search()">
                                    </div>
                                    <div class="p-3">
                                        <button
                                            class="bg-blue-100 uppercase text-sm hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-5 border border-blue-500 hover:border-transparent rounded"
                                            onclick="search()">
                                            SEARCH
                                        </button>
                                    </div>
                                </div>
                            </div>
                        
                        </div>

                        <!--Avg Trend Card-->
                        <div class="border-b p-3">
                            <h5 class="font-bold text-black">Average Compression Trend:</h5>
                        </div>
                        <div class="p-3">
                            <canvas id="compression_avg_graph" class="chartjs" height="120rem"></canvas>
                        </div>

                        <!--Pre Compression Card-->
                        <div class="border-b p-3">
                            <h5 class="font-bold text-black">Pre Compression:</h5>
                        </div>
                        <div class="p-5 my-3 border border-blue-500 bg-purple-300 rounded shadow">
                            <div class="flex">
                                <h5 class="font-bold w-1/2 text-center p-2 uppercase text-xl ext-black">RHS Discharge</h5>
                                <h5 class="font-bold w-1/2 text-center p-2 uppercase text-xl ext-black">LHS Discharge</h5>
                            </div>
                            <table class="w-full p-5 text-lg text-gray-700">
                                <thead>
                                    <tr>
                                        <th class="text-center uppercase pb-3 text-gray-700"> Upper Tolerance </th>
                                        <th class="text-center uppercase pb-3 text-gray-700"> Lower Tolerance </th>
                                        <th class="text-center uppercase pb-3 border-r border-gray-700 text-gray-700"> Force Line </th>
                                        <th class="text-center uppercase pb-3 text-gray-700"> Upper Tolerance</th>
                                        <th class="text-center uppercase pb-3 text-gray-700"> Lower Tolerance</th>
                                        <th class="text-center uppercase pb-3 text-gray-700"> Force Line </th>
                        
                                    </tr>
                                </thead>
                        
                                <tbody>
                                    <tr>
                                        <td id="P_R_upper" class="text-center border-gray-700">0</td>
                                        <td id="P_R_lower" class="text-center border-gray-700">0</td>
                                        <td id="P_R_Force" class="text-center border-r border-gray-700">0</td>
                                        <td id="P_L_upper" class="text-center border-gray-700">0</td>
                                        <td id="P_L_lower" class="text-center border-gray-700">0</td>
                                        <td id="P_L_Force" class="text-center border-gray-700">0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="p-3">
                            <canvas id="precompression_graph" class="chartjs" height="120rem"></canvas>
                        </div>
                        
                        <!--Main Compression Card-->
                        <div class="border-b p-3">
                            <h5 class="font-bold text-black">Main Compression:</h5>
                        </div>
                        <div class="p-5 my-3 border border-blue-500 bg-purple-300 rounded shadow">
                            <div class="flex">
                                <h5 class="font-bold w-1/2 text-center p-2 uppercase text-xl ext-black">RHS Discharge</h5>
                                <h5 class="font-bold w-1/2 text-center p-2 uppercase text-xl ext-black">LHS Discharge</h5>
                            </div>
                            <table class="w-full p-5 text-lg text-gray-700">
                                <thead>
                                    <tr>
                                        <th class="text-center uppercase pb-3 text-gray-700"> Upper Tolerance </th>
                                        <th class="text-center uppercase pb-3 text-gray-700"> Lower Tolerance </th>
                                        <th class="text-center uppercase pb-3 border-r border-gray-700 text-gray-700"> Force Line </th>
                                        <th class="text-center uppercase pb-3 text-gray-700"> Upper Tolerance</th>
                                        <th class="text-center uppercase pb-3 text-gray-700"> Lower Tolerance</th>
                                        <th class="text-center uppercase pb-3 text-gray-700"> Force Line </th>
                        
                                    </tr>
                                </thead>
                        
                                <tbody>
                                    <tr>
                                        <td id="M_R_upper" class="text-center border-gray-700">0</td>
                                        <td id="M_R_lower" class="text-center border-gray-700">0</td>
                                        <td id="M_R_Force" class="text-center border-r border-gray-700">0</td>
                                        <td id="M_L_upper" class="text-center border-gray-700">0</td>
                                        <td id="M_L_lower" class="text-center border-gray-700">0</td>
                                        <td id="M_L_Force" class="text-center border-gray-700">0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="p-3">
                            <canvas id="maincompression_graph" class="chartjs" height="120rem"></canvas>
                        </div>
                        
                        <!--Ejection Compression Card-->
                        <div class="border-b p-3">
                            <h5 class="font-bold text-black">Ejection Compression:</h5>
                        </div>
                        <div class="p-3">
                            <canvas id="ejncompression_graph" class="chartjs" height="120rem"></canvas>
                        </div>
                       
                        <!--/Graph Card-->
                    </div>

                </div>

                <div class="w-full xl:w-1/4 p-6 xl:max-w-4xl border-l-1 border-gray-300">
                
                    <!--"Container" for the graphs"-->
                    <div class="max-w-sm lg:max-w-3xl xl:max-w-5xl">
                
                    </div>
                </div>
            </div>

        </div>
    </div>


    <!-- Realtime Graph 2 -->
    <script>

        var punch = new Array("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45")

        var pregraphcanvas = document.getElementById('precompression_graph');
        var pregraphdata = {
            labels: punch,
            datasets: [
                {
                    label: "Pre Compression LHS",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "blue",
                    borderColor: "#F0F6F7FF",
                    pointBorderColor: "rgba(75,192,192,1)",
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(75,192,192,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 5,
                    pointHitRadius: 10,
                    data: [ ],
                },
                {
                    label: "Pre Compression RHS",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "cyan",
                    borderColor: "#F0F6F7FF",
                    pointBorderColor: "rgba(75,192,192,1)",
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(75,192,192,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 5,
                    pointHitRadius: 10,
                    data: [ ],
                },
                {
                    label: "Upper Tolerance",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "red",
                    borderColor: "red",
                    data: [],
                    type: 'line',
                },
                {
                    label: "Lower Tolerance",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "red",
                    borderColor: "red",
                    data: [],
                    type: 'line',
                },
                {
                    label: "Force Line",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "black",
                    borderColor: "black",
                    data: [],
                    type: 'line',
                },
            ],
        };
        var pregraphoptions = {
            tooltips: { enabled: true },
            legend: {
                onClick: function (e, legendItem) {
                    var index = legendItem.datasetIndex;
                    var ci = this.chart;
                    var alreadyHidden = (ci.getDatasetMeta(index).hidden === null) ? false : ci.getDatasetMeta(index).hidden;

                    console.log(index)

                    if (index == 0) {
                        updatetolerancepreLHS()
                    } else if (index == 1){
                        updatetolerancepreRHS()
                    }
                },
                labels: {
                    fontSize: 18,
                },
                position: 'top',
            },
            hover: { mode: null },
            showTooltips: false,
            showLines: true,
            scales: {
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        fontSize: 20,
                        labelString: 'Compression (kN)'
                    },
                    ticks: {
                        beginAtZero: true,
                        fontSize: 18,
                        max: 100
                    }
                }],
                xAxes: [{
                    scaleLabel: {
                        display: true,
                        fontSize: 20,
                        labelString: 'Punch Number'
                    },
                }],
            }, 
        };
        var pregraph = Chart.Bar(pregraphcanvas, {
            data: pregraphdata,
            options: pregraphoptions,
        });

        var maingraphcanvas = document.getElementById('maincompression_graph');
        var maingraphdata = {
            labels: punch,
            datasets: [
                {
                    label: "Main Compression LHS",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "blue",
                    borderColor: "#85B3D1FF",
                    pointBorderColor: "rgba(75,192,192,1)",
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(75,192,192,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 5,
                    pointHitRadius: 10,
                    data: [ ],
                },
                {
                    label: "Main Compression RHS",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "cyan",
                    borderColor: "#85B3D1FF",
                    pointBorderColor: "rgba(75,192,192,1)",
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(75,192,192,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 5,
                    pointHitRadius: 10,
                    data: [ ],
                },
                {
                    label: "Upper Tolerance",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "red",
                    borderColor: "red",
                    data: [],
                    type: 'line',
                },
                {
                    label: "Lower Tolerance",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "red",
                    borderColor: "red",
                    data: [],
                    type: 'line',
                },
                {
                    label: "Force Line",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "black",
                    borderColor: "black",
                    data: [],
                    type: 'line',
                },
            ],
        };
        var maingraphoptions = {
            tooltips: { enabled: true },
            legend: {
                labels: {
                    fontSize: 18,
                },
                position: 'top',
            },
            hover: { mode: null },
            showTooltips: false,
            showLines: true,
            scales: {
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        fontSize: 20,
                        labelString: 'Compression (kN)'
                    },
                    ticks: {
                        beginAtZero: true,
                        fontSize: 18,
                        max: 100
                    }
                }],
                xAxes: [{
                    scaleLabel: {
                        display: true,
                        fontSize: 20,
                        labelString: 'Punch Number'
                    },
                }],
            }, 
        };
        var maingraph = Chart.Bar(maingraphcanvas, {
            data: maingraphdata,
            options: maingraphoptions,
        });

        var ejngraphcanvas = document.getElementById('ejncompression_graph');
        var ejngraphdata = {
            labels: punch,
            datasets: [
                {
                    label: "Ejection Compression LHS",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "blue",
                    borderColor: "#85B3D1FF",
                    pointBorderColor: "rgba(75,192,192,1)",
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(75,192,192,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 5,
                    pointHitRadius: 10,
                    data: [ ],
                },
                {
                    label: "Ejection Compression RHS",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "cyan",
                    borderColor: "#85B3D1FF",
                    pointBorderColor: "rgba(75,192,192,1)",
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(75,192,192,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 5,
                    pointHitRadius: 10,
                    data: [ ],
                },
            ],
        };
        var ejngraphoptions = {
            tooltips: { enabled: true },
            legend: {
                labels: {
                    fontSize: 18,
                },
                position: 'top',
            },
            hover: { mode: null },
            showTooltips: false,
            showLines: true,
            scales: {
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        fontSize: 20,
                        labelString: 'Compression (kN)'
                    },
                    ticks: {
                        beginAtZero: true,
                        fontSize: 18,
                        max: 100
                    }
                }],
                xAxes: [{
                    scaleLabel: {
                        display: true,
                        fontSize: 20,
                        labelString: 'Punch Number'
                    },
                }],
            }, 
        };
        var ejngraph = Chart.Bar(ejngraphcanvas, {
            data: ejngraphdata,
            options: ejngraphoptions,
        });

        var graph3canvas = document.getElementById('compression_avg_graph');
        var graph3data = {
                labels: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"],
                datasets: [
                    {
                        label: "Pre Compression Average LHS",
                        yAxisID: 'A',
                        fill: false,
                        lineTension: 0.1,
                        backgroundColor: "palegreen",
                        borderColor: "palegreen",
                        pointBorderColor: "rgba(75,192,192,1)",
                        pointHoverRadius: 5,
                        pointHoverBackgroundColor: "rgba(75,192,192,1)",
                        pointHoverBorderColor: "rgba(220,220,220,1)",
                        pointHoverBorderWidth: 2,
                        pointRadius: 5,
                        pointHitRadius: 10,
                        data: [ ],
                    },
                    {
                        label: "Pre Compression Average RHS",
                        yAxisID: 'A',
                        fill: false,
                        lineTension: 0.1,
                        backgroundColor: "olivedrab",
                        borderColor: "olivedrab",
                        pointBorderColor: "rgba(75,192,192,1)",
                        pointHoverRadius: 5,
                        pointHoverBackgroundColor: "rgba(75,192,192,1)",
                        pointHoverBorderColor: "rgba(220,220,220,1)",
                        pointHoverBorderWidth: 2,
                        pointRadius: 5,
                        pointHitRadius: 10,
                        data: [ ],
                    },
                    {
                        label: "Main Compression Average LHS",
                        yAxisID: 'A',
                        fill: false,
                        lineTension: 0.1,
                        backgroundColor: "plum",
                        borderColor: "plum",
                        borderCapStyle: 'butt',
                        borderDash: [],
                        borderDashOffset: 0.0,
                        borderJoinStyle: 'miter',
                        pointBorderColor: "rgba(75,192,192,1)",
                        pointBackgroundColor: "#fff",
                        pointBorderWidth: 1,
                        pointHoverRadius: 5,
                        pointHoverBackgroundColor: "rgba(75,192,192,1)",
                        pointHoverBorderColor: "rgba(220,220,220,1)",
                        pointHoverBorderWidth: 2,
                        pointRadius: 5,
                        pointHitRadius: 10,
                        data: [ ],
                    },
                    {
                        label: "Main Compression Average RHS",
                        yAxisID: 'A',
                        fill: false,
                        lineTension: 0.1,
                        backgroundColor: "RebeccaPurple",
                        borderColor: "RebeccaPurple",
                        borderCapStyle: 'butt',
                        borderDash: [],
                        borderDashOffset: 0.0,
                        borderJoinStyle: 'miter',
                        pointBorderColor: "rgba(75,192,192,1)",
                        pointBackgroundColor: "#fff",
                        pointBorderWidth: 1,
                        pointHoverRadius: 5,
                        pointHoverBackgroundColor: "rgba(75,192,192,1)",
                        pointHoverBorderColor: "rgba(220,220,220,1)",
                        pointHoverBorderWidth: 2,
                        pointRadius: 5,
                        pointHitRadius: 10,
                        data: [ ],
                    },
                    {
                        label: "Ejection Compression Average LHS",
                        yAxisID: 'A',
                        fill: false,
                        lineTension: 0.1,
                        backgroundColor: "lightblue",
                        borderColor: "lightblue",
                        borderCapStyle: 'butt',
                        borderDash: [],
                        borderDashOffset: 0.0,
                        borderJoinStyle: 'miter',
                        pointBorderColor: "rgba(75,192,192,1)",
                        pointBackgroundColor: "#fff",
                        pointBorderWidth: 1,
                        pointHoverRadius: 5,
                        pointHoverBackgroundColor: "rgba(75,192,192,1)",
                        pointHoverBorderColor: "rgba(220,220,220,1)",
                        pointHoverBorderWidth: 2,
                        pointRadius: 5,
                        pointHitRadius: 10,
                        data: [ ],
                    },
                    {
                        label: "Ejection Compression Average RHS",
                        yAxisID: 'A',
                        fill: false,
                        lineTension: 0.1,
                        backgroundColor: "darkblue",
                        borderColor: "darkblue",
                        borderCapStyle: 'butt',
                        borderDash: [],
                        borderDashOffset: 0.0,
                        borderJoinStyle: 'miter',
                        pointBorderColor: "rgba(75,192,192,1)",
                        pointBackgroundColor: "#fff",
                        pointBorderWidth: 1,
                        pointHoverRadius: 5,
                        pointHoverBackgroundColor: "rgba(75,192,192,1)",
                        pointHoverBorderColor: "rgba(220,220,220,1)",
                        pointHoverBorderWidth: 2,
                        pointRadius: 5,
                        pointHitRadius: 10,
                        data: [ ],
                    },
                ],
            };
        var graph3option = {
                showLines: true,
                legend: {
                labels: {
                    fontSize: 18,
                },
                position: 'top',
                },
                scales: {
                    yAxes: [{
                        scaleLabel: {
                            display: true,
                            fontSize: 20,
                            labelString: 'Compression (kN)'
                        },
                        id: 'A',
                        type: 'linear',
                        position: 'left',
                        ticks: {
                            beginAtZero: true,
                            fontSize: 18,
                            max: 100
                        }
                    },],
                    xAxes: [{
                        scaleLabel: {
                            display: true,
                            fontSize: 20,
                            labelString: 'Rotation Number'
                        },
                    }],
                },

            };
        var graph3 = Chart.Line(graph3canvas, {
                data: graph3data,
                options: graph3option,
            });

    </script>

    <!-- Search -->
    <script>
        
        var currentBatch;

        async function fetchpayloadapiHF() {
            fetch(payloadURL)
                .then((resp) => resp.json()) // Transform the data into json
                .then(function (data) {
                    // Here you get the data to modify as you please
                    payload = data
                    currentBatch = payload.batch;
                    document.getElementById('currentbatch').innerHTML = currentBatch
                    console.log(currentBatch)
                })
            .catch(function (error) {
                // If there is any error you will catch them here
                console.log("[ PAYLOAD FETCH ERROR ]", error)
            });
        };
        fetchpayloadapiHF()

        var currentrotation;

        addEventListener("keydown", function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                search()
            }
        });

        async function search() {
            var x = document.getElementById("searchRotationNumber").value;
            var rtn = parseInt(x);

            console.log(rtn);
            querydb(rtn);

            const queryAvgURL = `${hostname}/api/search/average/csv/${currentBatch}`
            
            console.log(queryAvgURL)
            
            const avgData = await fetch(queryAvgURL);
            const avggbatch = await avgData.json();

            let avglistt = avggbatch;
            // console.log(avglistt)

            var from = parseInt(rtn);
            var to = from + 9;

            console.log(from)
            console.log(to)

            function loadavglist() {

                let i = -1;
                let j = 1;
                let k = 0;
                let l = 0;
                for (let avgg of avglistt) {
                    i++;
                    if (i >= from && i <= to) {
                        l = i - 1;
                        from++;
                        let avgdataa = avggbatch[l]
                        console.log(`RTN:${avgdataa[1]},PRELHS:${avgdataa[2]},PRERHS:${avgdataa[5]},MAINLHS:${avgdataa[3]},MAINRHS:${avgdataa[6]}`);

                        graph3.data.labels[k] = avgdataa[1];
                        graph3.data.datasets[0].data[k] = avgdataa[2];
                        graph3.data.datasets[1].data[k] = avgdataa[5];
                        graph3.data.datasets[2].data[k] = avgdataa[3];
                        graph3.data.datasets[3].data[k] = avgdataa[6];

                        graph3.update();
                        k++;
                        j++;
                    } else if (i > to) {
                        // await fetch(generatereportURL);
                    }
                }
            }

            loadavglist();

        };

        function updatetolerancepreRHS(){
            if (payload[csvdata.indexOf("mode")] == true) {
                
                pregraph.data.datasets[2].data = Array(45).fill(payload[csvdata.indexOf("bi_R_rjn_high")])
                pregraph.data.datasets[3].data = Array(45).fill(payload[csvdata.indexOf("bi_R_rjn_low")])
                pregraph.data.datasets[4].data = Array(45).fill(payload[csvdata.indexOf("bi_R_force_line")])

                pregraph.update();

            }
            else if (payload[csvdata.indexOf("mode")] == false) {
                
            }
        }

        function updatetolerancepreRHS(){
            if (payload[csvdata.indexOf("mode")] == true) {
                pregraph.data.datasets[2].data = Array(45).fill(payload[csvdata.indexOf("bi_L_rjn_high")])
                pregraph.data.datasets[3].data = Array(45).fill(payload[csvdata.indexOf("bi_L_rjn_low")])
                pregraph.data.datasets[4].data = Array(45).fill(payload[csvdata.indexOf("bi_L_force_line")])
                pregraph.update();
            }
            else if (payload[csvdata.indexOf("mode")] == false) {
                
            }
        }

        var payload
        var csvdata

        async function querydb(input_rotation) {
            // Create Request URL
            let requesturl = `${searchURL}${input_rotation}`

            // Hit API
            const searchResponse = await fetch(requesturl);
            payload = await searchResponse.json();
            console.log(payload);

            // var ages = [3, 10, 18, 20];
            csvdata = ['time', 'bi_L_force_line', 'bi_L_rjn_high', 'bi_L_rjn_low', 'bi_R_force_line', 'bi_R_rjn_high', 'bi_R_rjn_low', 'mode', 'mono_force_line', 'mono_rjn_high', 'mono_rjn_low', 'p10LHSejn', 'p10LHSmain', 'p10LHSpre', 'p10RHSejn', 'p10RHSmain', 'p10RHSpre', 'p11LHSejn', 'p11LHSmain', 'p11LHSpre', 'p11RHSejn', 'p11RHSmain', 'p11RHSpre', 'p12LHSejn', 'p12LHSmain', 'p12LHSpre', 'p12RHSejn', 'p12RHSmain', 'p12RHSpre', 'p13LHSejn', 'p13LHSmain', 'p13LHSpre', 'p13RHSejn', 'p13RHSmain', 'p13RHSpre', 'p14LHSejn', 'p14LHSmain', 'p14LHSpre', 'p14RHSejn', 'p14RHSmain', 'p14RHSpre', 'p15LHSejn', 'p15LHSmain', 'p15LHSpre', 'p15RHSejn', 'p15RHSmain', 'p15RHSpre', 'p16LHSejn', 'p16LHSmain', 'p16LHSpre', 'p16RHSejn', 'p16RHSmain', 'p16RHSpre', 'p17LHSejn', 'p17LHSmain', 'p17LHSpre', 'p17RHSejn', 'p17RHSmain', 'p17RHSpre', 'p18LHSejn', 'p18LHSmain', 'p18LHSpre', 'p18RHSejn', 'p18RHSmain', 'p18RHSpre', 'p19LHSejn', 'p19LHSmain', 'p19LHSpre', 'p19RHSejn', 'p19RHSmain', 'p19RHSpre', 'p1LHSejn', 'p1LHSmain', 'p1LHSpre', 'p1RHSejn', 'p1RHSmain', 'p1RHSpre', 'p20LHSejn', 'p20LHSmain', 'p20LHSpre', 'p20RHSejn', 'p20RHSmain', 'p20RHSpre', 'p21LHSejn', 'p21LHSmain', 'p21LHSpre', 'p21RHSejn', 'p21RHSmain', 'p21RHSpre', 'p22LHSejn', 'p22LHSmain', 'p22LHSpre', 'p22RHSejn', 'p22RHSmain', 'p22RHSpre', 'p23LHSejn', 'p23LHSmain', 'p23LHSpre', 'p23RHSejn', 'p23RHSmain', 'p23RHSpre', 'p24LHSejn', 'p24LHSmain', 'p24LHSpre', 'p24RHSejn', 'p24RHSmain', 'p24RHSpre', 'p25LHSejn', 'p25LHSmain', 'p25LHSpre', 'p25RHSejn', 'p25RHSmain', 'p25RHSpre', 'p26LHSejn', 'p26LHSmain', 'p26LHSpre', 'p26RHSejn', 'p26RHSmain', 'p26RHSpre', 'p27LHSejn', 'p27LHSmain', 'p27LHSpre', 'p27RHSejn', 'p27RHSmain', 'p27RHSpre', 'p28LHSejn', 'p28LHSmain', 'p28LHSpre', 'p28RHSejn', 'p28RHSmain', 'p28RHSpre', 'p29LHSejn', 'p29LHSmain', 'p29LHSpre', 'p29RHSejn', 'p29RHSmain', 'p29RHSpre', 'p2LHSejn', 'p2LHSmain', 'p2LHSpre', 'p2RHSejn', 'p2RHSmain', 'p2RHSpre', 'p30LHSejn', 'p30LHSmain', 'p30LHSpre', 'p30RHSejn', 'p30RHSmain', 'p30RHSpre', 'p31LHSejn', 'p31LHSmain', 'p31LHSpre', 'p31RHSejn', 'p31RHSmain', 'p31RHSpre', 'p32LHSejn', 'p32LHSmain', 'p32LHSpre', 'p32RHSejn', 'p32RHSmain', 'p32RHSpre', 'p33LHSejn', 'p33LHSmain', 'p33LHSpre', 'p33RHSejn', 'p33RHSmain', 'p33RHSpre', 'p34LHSejn', 'p34LHSmain', 'p34LHSpre', 'p34RHSejn', 'p34RHSmain', 'p34RHSpre', 'p35LHSejn', 'p35LHSmain', 'p35LHSpre', 'p35RHSejn', 'p35RHSmain', 'p35RHSpre', 'p36LHSejn', 'p36LHSmain', 'p36LHSpre', 'p36RHSejn', 'p36RHSmain', 'p36RHSpre', 'p37LHSejn', 'p37LHSmain', 'p37LHSpre', 'p37RHSejn', 'p37RHSmain', 'p37RHSpre', 'p38LHSejn', 'p38LHSmain', 'p38LHSpre', 'p38RHSejn', 'p38RHSmain', 'p38RHSpre', 'p39LHSejn', 'p39LHSmain', 'p39LHSpre', 'p39RHSejn', 'p39RHSmain', 'p39RHSpre', 'p3LHSejn', 'p3LHSmain', 'p3LHSpre', 'p3RHSejn', 'p3RHSmain', 'p3RHSpre', 'p40LHSejn', 'p40LHSmain', 'p40LHSpre', 'p40RHSejn', 'p40RHSmain', 'p40RHSpre', 'p41LHSejn', 'p41LHSmain', 'p41LHSpre', 'p41RHSejn', 'p41RHSmain', 'p41RHSpre', 'p42LHSejn', 'p42LHSmain', 'p42LHSpre', 'p42RHSejn', 'p42RHSmain', 'p42RHSpre', 'p43LHSejn', 'p43LHSmain', 'p43LHSpre', 'p43RHSejn', 'p43RHSmain', 'p43RHSpre', 'p44LHSejn', 'p44LHSmain', 'p44LHSpre', 'p44RHSejn', 'p44RHSmain', 'p44RHSpre', 'p45LHSejn', 'p45LHSmain', 'p45LHSpre', 'p45RHSejn', 'p45RHSmain', 'p45RHSpre', 'p4LHSejn', 'p4LHSmain', 'p4LHSpre', 'p4RHSejn', 'p4RHSmain', 'p4RHSpre', 'p5LHSejn', 'p5LHSmain', 'p5LHSpre', 'p5RHSejn', 'p5RHSmain', 'p5RHSpre', 'p6LHSejn', 'p6LHSmain', 'p6LHSpre', 'p6RHSejn', 'p6RHSmain', 'p6RHSpre', 'p7LHSejn', 'p7LHSmain', 'p7LHSpre', 'p7RHSejn', 'p7RHSmain', 'p7RHSpre', 'p8LHSejn', 'p8LHSmain', 'p8LHSpre', 'p8RHSejn', 'p8RHSmain', 'p8RHSpre', 'p9LHSejn', 'p9LHSmain', 'p9LHSpre', 'p9RHSejn', 'p9RHSmain', 'p9RHSpre', 'rotation']

            if (payload[csvdata.indexOf("mode")] == true) {
                document.getElementById("mode_metric").innerHTML = "BI-LAYER";

                document.getElementById("P_R_upper").innerHTML = payload[csvdata.indexOf("bi_R_rjn_high")];
                document.getElementById("P_R_lower").innerHTML = payload[csvdata.indexOf("bi_R_rjn_low")];
                document.getElementById("P_R_Force").innerHTML = payload[csvdata.indexOf("bi_R_force_line")];
                document.getElementById("P_L_upper").innerHTML = payload[csvdata.indexOf("bi_L_rjn_high")];
                document.getElementById("P_L_lower").innerHTML = payload[csvdata.indexOf("bi_L_rjn_low")];                
                document.getElementById("P_L_Force").innerHTML = payload[csvdata.indexOf("bi_L_force_line")];

                document.getElementById("M_R_upper").innerHTML = "-"
                document.getElementById("M_R_lower").innerHTML = "-"
                document.getElementById("M_R_Force").innerHTML = "-"
                document.getElementById("M_L_upper").innerHTML = "-"
                document.getElementById("M_L_lower").innerHTML = "-"
                document.getElementById("M_L_Force").innerHTML = "-"

            }
            else if (payload[csvdata.indexOf("mode")] == false) {
                document.getElementById("mode_metric").innerHTML = "MONO";

                document.getElementById("P_R_upper").innerHTML = "-"
                document.getElementById("P_R_lower").innerHTML = "-"
                document.getElementById("P_R_Force").innerHTML = "-"
                document.getElementById("P_L_upper").innerHTML = "-"
                document.getElementById("P_L_lower").innerHTML = "-"
                document.getElementById("P_L_Force").innerHTML = "-"

                document.getElementById("M_R_upper").innerHTML = payload[csvdata.indexOf("mono_rjn_high")];
                document.getElementById("M_R_lower").innerHTML = payload[csvdata.indexOf("mono_rjn_low")];
                document.getElementById("M_R_Force").innerHTML = payload[csvdata.indexOf("mono_force_line")];
                document.getElementById("M_L_upper").innerHTML = payload[csvdata.indexOf("mono_rjn_high")];
                document.getElementById("M_L_lower").innerHTML = payload[csvdata.indexOf("mono_rjn_low")];
                document.getElementById("M_L_Force").innerHTML = payload[csvdata.indexOf("mono_force_line")];

                maingraph.data.datasets[2].data = Array(45).fill(payload[csvdata.indexOf("mono_rjn_high")])
                maingraph.data.datasets[3].data = Array(45).fill(payload[csvdata.indexOf("mono_rjn_low")])
                maingraph.data.datasets[4].data = Array(45).fill(payload[csvdata.indexOf("mono_force_line")])

            }

            pregraph.data.datasets[0].data[0] = payload[csvdata.indexOf("p1LHSpre")];
            pregraph.data.datasets[0].data[1] = payload[csvdata.indexOf("p2LHSpre")];
            pregraph.data.datasets[0].data[2] = payload[csvdata.indexOf("p3LHSpre")];
            pregraph.data.datasets[0].data[3] = payload[csvdata.indexOf("p4LHSpre")];
            pregraph.data.datasets[0].data[4] = payload[csvdata.indexOf("p5LHSpre")];
            pregraph.data.datasets[0].data[5] = payload[csvdata.indexOf("p6LHSpre")];
            pregraph.data.datasets[0].data[6] = payload[csvdata.indexOf("p7LHSpre")];
            pregraph.data.datasets[0].data[7] = payload[csvdata.indexOf("p8LHSpre")];
            pregraph.data.datasets[0].data[8] = payload[csvdata.indexOf("p9LHSpre")];
            pregraph.data.datasets[0].data[9] = payload[csvdata.indexOf("p10LHSpr")];
            pregraph.data.datasets[0].data[10] = payload[csvdata.indexOf("p11LHSpre")];
            pregraph.data.datasets[0].data[11] = payload[csvdata.indexOf("p12LHSpre")];
            pregraph.data.datasets[0].data[12] = payload[csvdata.indexOf("p13LHSpre")];
            pregraph.data.datasets[0].data[13] = payload[csvdata.indexOf("p14LHSpre")];
            pregraph.data.datasets[0].data[14] = payload[csvdata.indexOf("p15LHSpre")];
            pregraph.data.datasets[0].data[15] = payload[csvdata.indexOf("p16LHSpre")];
            pregraph.data.datasets[0].data[16] = payload[csvdata.indexOf("p17LHSpre")];
            pregraph.data.datasets[0].data[17] = payload[csvdata.indexOf("p18LHSpre")];
            pregraph.data.datasets[0].data[18] = payload[csvdata.indexOf("p19LHSpre")];
            pregraph.data.datasets[0].data[19] = payload[csvdata.indexOf("p20LHSpre")];
            pregraph.data.datasets[0].data[20] = payload[csvdata.indexOf("p21LHSpre")];
            pregraph.data.datasets[0].data[21] = payload[csvdata.indexOf("p22LHSpre")];
            pregraph.data.datasets[0].data[22] = payload[csvdata.indexOf("p23LHSpre")];
            pregraph.data.datasets[0].data[23] = payload[csvdata.indexOf("p24LHSpre")];
            pregraph.data.datasets[0].data[24] = payload[csvdata.indexOf("p25LHSpre")];
            pregraph.data.datasets[0].data[25] = payload[csvdata.indexOf("p26LHSpre")];
            pregraph.data.datasets[0].data[26] = payload[csvdata.indexOf("p27LHSpre")];
            pregraph.data.datasets[0].data[27] = payload[csvdata.indexOf("p28LHSpre")];
            pregraph.data.datasets[0].data[28] = payload[csvdata.indexOf("p29LHSpre")];
            pregraph.data.datasets[0].data[29] = payload[csvdata.indexOf("p30LHSpre")];
            pregraph.data.datasets[0].data[30] = payload[csvdata.indexOf("p31LHSpre")];
            pregraph.data.datasets[0].data[31] = payload[csvdata.indexOf("p32LHSpre")];
            pregraph.data.datasets[0].data[32] = payload[csvdata.indexOf("p33LHSpre")];
            pregraph.data.datasets[0].data[33] = payload[csvdata.indexOf("p34LHSpre")];
            pregraph.data.datasets[0].data[34] = payload[csvdata.indexOf("p35LHSpre")];
            pregraph.data.datasets[0].data[35] = payload[csvdata.indexOf("p36LHSpre")];
            pregraph.data.datasets[0].data[36] = payload[csvdata.indexOf("p37LHSpre")];
            pregraph.data.datasets[0].data[37] = payload[csvdata.indexOf("p38LHSpre")];
            pregraph.data.datasets[0].data[38] = payload[csvdata.indexOf("p39LHSpre")];
            pregraph.data.datasets[0].data[39] = payload[csvdata.indexOf("p40LHSpre")];
            pregraph.data.datasets[0].data[40] = payload[csvdata.indexOf("p41LHSpre")];
            pregraph.data.datasets[0].data[41] = payload[csvdata.indexOf("p42LHSpre")];
            pregraph.data.datasets[0].data[42] = payload[csvdata.indexOf("p43LHSpre")];
            pregraph.data.datasets[0].data[43] = payload[csvdata.indexOf("p44LHSpre")];
            pregraph.data.datasets[0].data[44] = payload[csvdata.indexOf("p45LHSpre")];

            pregraph.data.datasets[1].data[0] =  payload[csvdata.indexOf("p1RHSpre")]
            pregraph.data.datasets[1].data[1] =  payload[csvdata.indexOf("p2RHSpre")]
            pregraph.data.datasets[1].data[2] =  payload[csvdata.indexOf("p3RHSpre")]
            pregraph.data.datasets[1].data[3] =  payload[csvdata.indexOf("p4RHSpre")]
            pregraph.data.datasets[1].data[4] =  payload[csvdata.indexOf("p5RHSpre")]
            pregraph.data.datasets[1].data[5] =  payload[csvdata.indexOf("p6RHSpre")]
            pregraph.data.datasets[1].data[6] =  payload[csvdata.indexOf("p7RHSpre")]
            pregraph.data.datasets[1].data[7] =  payload[csvdata.indexOf("p8RHSpre")]
            pregraph.data.datasets[1].data[8] =  payload[csvdata.indexOf("p9RHSpre")]
            pregraph.data.datasets[1].data[9] =  payload[csvdata.indexOf("p10RHSpre")];
            pregraph.data.datasets[1].data[10] = payload[csvdata.indexOf("p11RHSpre")];
            pregraph.data.datasets[1].data[11] = payload[csvdata.indexOf("p12RHSpre")];
            pregraph.data.datasets[1].data[12] = payload[csvdata.indexOf("p13RHSpre")];
            pregraph.data.datasets[1].data[13] = payload[csvdata.indexOf("p14RHSpre")];
            pregraph.data.datasets[1].data[14] = payload[csvdata.indexOf("p15RHSpre")];
            pregraph.data.datasets[1].data[15] = payload[csvdata.indexOf("p16RHSpre")];
            pregraph.data.datasets[1].data[16] = payload[csvdata.indexOf("p17RHSpre")];
            pregraph.data.datasets[1].data[17] = payload[csvdata.indexOf("p18RHSpre")];
            pregraph.data.datasets[1].data[18] = payload[csvdata.indexOf("p19RHSpre")];
            pregraph.data.datasets[1].data[19] = payload[csvdata.indexOf("p20RHSpre")];
            pregraph.data.datasets[1].data[20] = payload[csvdata.indexOf("p21RHSpre")];
            pregraph.data.datasets[1].data[21] = payload[csvdata.indexOf("p22RHSpre")];
            pregraph.data.datasets[1].data[22] = payload[csvdata.indexOf("p23RHSpre")];
            pregraph.data.datasets[1].data[23] = payload[csvdata.indexOf("p24RHSpre")];
            pregraph.data.datasets[1].data[24] = payload[csvdata.indexOf("p25RHSpre")];
            pregraph.data.datasets[1].data[25] = payload[csvdata.indexOf("p26RHSpre")];
            pregraph.data.datasets[1].data[26] = payload[csvdata.indexOf("p27RHSpre")];
            pregraph.data.datasets[1].data[27] = payload[csvdata.indexOf("p28RHSpre")];
            pregraph.data.datasets[1].data[28] = payload[csvdata.indexOf("p29RHSpre")];
            pregraph.data.datasets[1].data[29] = payload[csvdata.indexOf("p30RHSpre")];
            pregraph.data.datasets[1].data[30] = payload[csvdata.indexOf("p31RHSpre")];
            pregraph.data.datasets[1].data[31] = payload[csvdata.indexOf("p32RHSpre")];
            pregraph.data.datasets[1].data[32] = payload[csvdata.indexOf("p33RHSpre")];
            pregraph.data.datasets[1].data[33] = payload[csvdata.indexOf("p34RHSpre")];
            pregraph.data.datasets[1].data[34] = payload[csvdata.indexOf("p35RHSpre")];
            pregraph.data.datasets[1].data[35] = payload[csvdata.indexOf("p36RHSpre")];
            pregraph.data.datasets[1].data[36] = payload[csvdata.indexOf("p37RHSpre")];
            pregraph.data.datasets[1].data[37] = payload[csvdata.indexOf("p38RHSpre")];
            pregraph.data.datasets[1].data[38] = payload[csvdata.indexOf("p39RHSpre")];
            pregraph.data.datasets[1].data[39] = payload[csvdata.indexOf("p40RHSpre")];
            pregraph.data.datasets[1].data[40] = payload[csvdata.indexOf("p41RHSpre")];
            pregraph.data.datasets[1].data[41] = payload[csvdata.indexOf("p42RHSpre")];
            pregraph.data.datasets[1].data[42] = payload[csvdata.indexOf("p43RHSpre")];
            pregraph.data.datasets[1].data[43] = payload[csvdata.indexOf("p44RHSpre")];
            pregraph.data.datasets[1].data[44] = payload[csvdata.indexOf("p45RHSpre")];

            maingraph.data.datasets[0].data[0] = payload[csvdata.indexOf("p1LHSmain")];
            maingraph.data.datasets[0].data[1] = payload[csvdata.indexOf("p2LHSmain")];
            maingraph.data.datasets[0].data[2] = payload[csvdata.indexOf("p3LHSmain")];
            maingraph.data.datasets[0].data[3] = payload[csvdata.indexOf("p4LHSmain")];
            maingraph.data.datasets[0].data[4] = payload[csvdata.indexOf("p5LHSmain")];
            maingraph.data.datasets[0].data[5] = payload[csvdata.indexOf("p6LHSmain")];
            maingraph.data.datasets[0].data[6] = payload[csvdata.indexOf("p7LHSmain")];
            maingraph.data.datasets[0].data[7] = payload[csvdata.indexOf("p8LHSmain")];
            maingraph.data.datasets[0].data[8] = payload[csvdata.indexOf("p9LHSmain")];
            maingraph.data.datasets[0].data[9] =  payload[csvdata.indexOf("p10LHSmain")];
            maingraph.data.datasets[0].data[10] = payload[csvdata.indexOf("p11LHSmain")];
            maingraph.data.datasets[0].data[11] = payload[csvdata.indexOf("p12LHSmain")];
            maingraph.data.datasets[0].data[12] = payload[csvdata.indexOf("p13LHSmain")];
            maingraph.data.datasets[0].data[13] = payload[csvdata.indexOf("p14LHSmain")];
            maingraph.data.datasets[0].data[14] = payload[csvdata.indexOf("p15LHSmain")];
            maingraph.data.datasets[0].data[15] = payload[csvdata.indexOf("p16LHSmain")];
            maingraph.data.datasets[0].data[16] = payload[csvdata.indexOf("p17LHSmain")];
            maingraph.data.datasets[0].data[17] = payload[csvdata.indexOf("p18LHSmain")];
            maingraph.data.datasets[0].data[18] = payload[csvdata.indexOf("p19LHSmain")];
            maingraph.data.datasets[0].data[19] = payload[csvdata.indexOf("p20LHSmain")];
            maingraph.data.datasets[0].data[20] = payload[csvdata.indexOf("p21LHSmain")];
            maingraph.data.datasets[0].data[21] = payload[csvdata.indexOf("p22LHSmain")];
            maingraph.data.datasets[0].data[22] = payload[csvdata.indexOf("p23LHSmain")];
            maingraph.data.datasets[0].data[23] = payload[csvdata.indexOf("p24LHSmain")];
            maingraph.data.datasets[0].data[24] = payload[csvdata.indexOf("p25LHSmain")];
            maingraph.data.datasets[0].data[25] = payload[csvdata.indexOf("p26LHSmain")];
            maingraph.data.datasets[0].data[26] = payload[csvdata.indexOf("p27LHSmain")];
            maingraph.data.datasets[0].data[27] = payload[csvdata.indexOf("p28LHSmain")];
            maingraph.data.datasets[0].data[28] = payload[csvdata.indexOf("p29LHSmain")];
            maingraph.data.datasets[0].data[29] = payload[csvdata.indexOf("p30LHSmain")];
            maingraph.data.datasets[0].data[30] = payload[csvdata.indexOf("p31LHSmain")];
            maingraph.data.datasets[0].data[31] = payload[csvdata.indexOf("p32LHSmain")];
            maingraph.data.datasets[0].data[32] = payload[csvdata.indexOf("p33LHSmain")];
            maingraph.data.datasets[0].data[33] = payload[csvdata.indexOf("p34LHSmain")];
            maingraph.data.datasets[0].data[34] = payload[csvdata.indexOf("p35LHSmain")];
            maingraph.data.datasets[0].data[35] = payload[csvdata.indexOf("p36LHSmain")];
            maingraph.data.datasets[0].data[36] = payload[csvdata.indexOf("p37LHSmain")];
            maingraph.data.datasets[0].data[37] = payload[csvdata.indexOf("p38LHSmain")];
            maingraph.data.datasets[0].data[38] = payload[csvdata.indexOf("p39LHSmain")];
            maingraph.data.datasets[0].data[39] = payload[csvdata.indexOf("p40LHSmain")];
            maingraph.data.datasets[0].data[40] = payload[csvdata.indexOf("p41LHSmain")];
            maingraph.data.datasets[0].data[41] = payload[csvdata.indexOf("p42LHSmain")];
            maingraph.data.datasets[0].data[42] = payload[csvdata.indexOf("p43LHSmain")];
            maingraph.data.datasets[0].data[43] = payload[csvdata.indexOf("p44LHSmain")];
            maingraph.data.datasets[0].data[44] = payload[csvdata.indexOf("p45LHSmain")];

            maingraph.data.datasets[1].data[0] = payload[csvdata.indexOf("p1RHSmain")];
            maingraph.data.datasets[1].data[1] = payload[csvdata.indexOf("p2RHSmain")];
            maingraph.data.datasets[1].data[2] = payload[csvdata.indexOf("p3RHSmain")];
            maingraph.data.datasets[1].data[3] = payload[csvdata.indexOf("p4RHSmain")];
            maingraph.data.datasets[1].data[4] = payload[csvdata.indexOf("p5RHSmain")];
            maingraph.data.datasets[1].data[5] = payload[csvdata.indexOf("p6RHSmain")];
            maingraph.data.datasets[1].data[6] = payload[csvdata.indexOf("p7RHSmain")];
            maingraph.data.datasets[1].data[7] = payload[csvdata.indexOf("p8RHSmain")];
            maingraph.data.datasets[1].data[8] = payload[csvdata.indexOf("p9RHSmain")];
            maingraph.data.datasets[1].data[9] =  payload[csvdata.indexOf("p10RHSmain")];
            maingraph.data.datasets[1].data[10] = payload[csvdata.indexOf("p11RHSmain")];
            maingraph.data.datasets[1].data[11] = payload[csvdata.indexOf("p12RHSmain")];
            maingraph.data.datasets[1].data[12] = payload[csvdata.indexOf("p13RHSmain")];
            maingraph.data.datasets[1].data[13] = payload[csvdata.indexOf("p14RHSmain")];
            maingraph.data.datasets[1].data[14] = payload[csvdata.indexOf("p15RHSmain")];
            maingraph.data.datasets[1].data[15] = payload[csvdata.indexOf("p16RHSmain")];
            maingraph.data.datasets[1].data[16] = payload[csvdata.indexOf("p17RHSmain")];
            maingraph.data.datasets[1].data[17] = payload[csvdata.indexOf("p18RHSmain")];
            maingraph.data.datasets[1].data[18] = payload[csvdata.indexOf("p19RHSmain")];
            maingraph.data.datasets[1].data[19] = payload[csvdata.indexOf("p20RHSmain")];
            maingraph.data.datasets[1].data[20] = payload[csvdata.indexOf("p21RHSmain")];
            maingraph.data.datasets[1].data[21] = payload[csvdata.indexOf("p22RHSmain")];
            maingraph.data.datasets[1].data[22] = payload[csvdata.indexOf("p23RHSmain")];
            maingraph.data.datasets[1].data[23] = payload[csvdata.indexOf("p24RHSmain")];
            maingraph.data.datasets[1].data[24] = payload[csvdata.indexOf("p25RHSmain")];
            maingraph.data.datasets[1].data[25] = payload[csvdata.indexOf("p26RHSmain")];
            maingraph.data.datasets[1].data[26] = payload[csvdata.indexOf("p27RHSmain")];
            maingraph.data.datasets[1].data[27] = payload[csvdata.indexOf("p28RHSmain")];
            maingraph.data.datasets[1].data[28] = payload[csvdata.indexOf("p29RHSmain")];
            maingraph.data.datasets[1].data[29] = payload[csvdata.indexOf("p30RHSmain")];
            maingraph.data.datasets[1].data[30] = payload[csvdata.indexOf("p31RHSmain")];
            maingraph.data.datasets[1].data[31] = payload[csvdata.indexOf("p32RHSmain")];
            maingraph.data.datasets[1].data[32] = payload[csvdata.indexOf("p33RHSmain")];
            maingraph.data.datasets[1].data[33] = payload[csvdata.indexOf("p34RHSmain")];
            maingraph.data.datasets[1].data[34] = payload[csvdata.indexOf("p35RHSmain")];
            maingraph.data.datasets[1].data[35] = payload[csvdata.indexOf("p36RHSmain")];
            maingraph.data.datasets[1].data[36] = payload[csvdata.indexOf("p37RHSmain")];
            maingraph.data.datasets[1].data[37] = payload[csvdata.indexOf("p38RHSmain")];
            maingraph.data.datasets[1].data[38] = payload[csvdata.indexOf("p39RHSmain")];
            maingraph.data.datasets[1].data[39] = payload[csvdata.indexOf("p40RHSmain")];
            maingraph.data.datasets[1].data[40] = payload[csvdata.indexOf("p41RHSmain")];
            maingraph.data.datasets[1].data[41] = payload[csvdata.indexOf("p42RHSmain")];
            maingraph.data.datasets[1].data[42] = payload[csvdata.indexOf("p43RHSmain")];
            maingraph.data.datasets[1].data[43] = payload[csvdata.indexOf("p44RHSmain")];
            maingraph.data.datasets[1].data[44] = payload[csvdata.indexOf("p45RHSmain")];
            
            pregraph.update();
            maingraph.update();
        }

    </script>

</body>

</html>
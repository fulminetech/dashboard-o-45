<!--This template is based on: https://dribbble.com/shots/6531694-Marketing-Dashboard by Gregoire Vella -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dashboard - 45</title>
    <meta name="description" content="description here">
    <meta name="keywords" content="keywords,here">

    <link href="/font/css/all.css" rel="stylesheet">
    <link href="/css/tailwind.css" rel="stylesheet">
    <script src="/env/env.js"></script>
    <script src="/printjs/dist/print.js"></script>

    <!-- sidebar -->
    <style>
        #sidebar {
            transition: ease-in-out all .1s;
            z-index: 9999;
        }

        #sidebar span {
            opacity: 0;
            position: absolute;
            transition: ease-in-out all .1s;
        }

        #sidebar:hover {
            width: 180px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            /*shadow-2xl*/
        }

        #sidebar:hover span {
            opacity: 1;
        }
    </style>

    <!-- Modal CSS -->
    <style>
        .modal {
            transition: opacity 0.25s ease;
        }

        body.modal-active {
            overflow-x: hidden;
            overflow-y: visible !important;
        }
    </style>

</head>

<body class="flex bg-gray-100 select-none font-sans">

    <!-- Side bar-->
    <div id="sidebar" class="h-screen w-16 menu bg-white text-white px-4 flex items-center nunito static fixed shadow">

        <ul class="list-reset">
            <li class="my-2 md:my-0">
                <a href="/dashboard"
                    class="block my-3 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fas fa-chevron-left fa-fw mr-3 text-xl"></i><span
                        class="w-full inline-block text-lg">Dashboard</span>
                </a>
            </li>
            <li class="my-2 md:my-0">
                <a href="/settings_recipie"
                    class="block my-3 md:py-3 pl-1 align-middle text-gray-600 no-underline hover:text-indigo-400">
                    <i class="fas fa-medkit fa-fw mr-3 text-xl"></i><span class="w-full inline-block text-lg">Recipes
                        </span>
                </a>
            </li>

        </ul>

    </div>

    <div class="flex flex-col flex-wrap flex-1 flex-grow content-start pl-16">

        <div class="">

            <!--Graph Content -->
            <div id="main-content" class="w-full flex-1 ">

                <div class="flex flex-1 flex-wrap">
                    <div class="w-full p-6 m-6 bg-gray-300 border border-gray-700 rounded">

                        <!-- Search: Parameters -->
                        <!-- <div class="border-b px-3">
                            <h5 class="font-bold text-black">User Level:</h5>
                        </div> -->

                        <!-- <div class="flex grid grid-cols-2 p-3 ">


                            <div class="flex flex-col">
                                <div class="flex flex-row">
                                    <div class="">
                                        <select class="form-select w-full block text-xl border-black text-gray-700"
                                            name="roller" id="roller">
                                            <option value="1" onclick="level()">Operator</option>
                                            <option value="2" onclick="level()">Maintainence</option>
                                            <option value="3" onclick="level()">Supervisor</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="">
                                <button id="searchbatch"
                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-5 border border-blue-500 hover:border-transparent rounded"
                                    onclick="level()">
                                    SEARCH
                                </button>
                            </div>
                        </div> -->



                        <!-- Action:  -->
                        <div class="border-b mt-2 px-3">
                            <h5 class="font-bold text-black">Actions:</h5>
                        </div>

                        <div class="flex grid grid-cols-5">

                            <div class="flex flex-wrap p-3">

                                <!-- PDF report Button -->
                                <div class="py-3">
                                    <button id="generatepdfreport"
                                        class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-10 border border-blue-500 hover:border-transparent rounded"
                                        onclick="addrec()">
                                        Add Recipe
                                    </button>
                                </div>
                            </div>

                            <!-- <div class="flex flex-wrap p-3">
                            <div class="py-3">
                                <button
                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-10 border border-blue-500 hover:border-transparent rounded"
                                    onclick="edituser()">
                                    Edit User
                                </button>
                            </div>
                        </div> -->

                            <!-- <div class="flex flex-wrap p-3">
                            <div class="py-3">
                                <button
                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-10 border border-blue-500 hover:border-transparent rounded"
                                    onclick="deleterec()">
                                    Deactivate
                                </button>
                            </div>
                        </div> -->

                        <div class="flex flex-wrap p-3">    
                            <div class="py-3">
                                <button id="generatepdfreport1"
                                    class="modal1-open text-center text-xl bg-blue-100 uppercase text-gray-800 font-semibold py-2 px-5 border border-blue-500 rounded"
                                    onclick="reportrec()">Recipe PDF</button>
                            </div>
                        </div>

                        <div class="flex flex-wrap p-3">    
                            <div class="py-3">
                                <button id="reportandprintrecid"
                                    class="modal1-open text-center text-xl bg-blue-100 uppercase text-gray-800 font-semibold py-2 px-5 border border-blue-500 rounded"
                                    onclick="reportandprintrec()">Print Recipe</button>
                            </div>
                        </div>

                        </div>

                        <!-- Search: Parameters -->
                        <div class="border-b px-3">
                            <h5 class="font-bold text-black">Search :</h5>
                        </div>

                        <div class="flex p-3 ">

                            <div class="flex flex-col">
                                <h3> Recipe Name </h3>
                                <div class="flex flex-row">
                                    <div class="py-3">
                                        <input id="susername"
                                            class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                            type="text" placeholder="" onkeydown="if (event.keyCode == 13) srec()">
                                    </div>
                                    <div class="p-3">
                                        <button id="searchbatch"
                                            class="bg-blue-100 uppercase text-sm hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 px-5 border border-blue-500 hover:border-transparent rounded"
                                            onclick="srec()">
                                            SEARCH
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div id="form" class="hidden">
                            <div class="flex grid grid-cols-5 px-3 ">

                                <div class="flex flex-col">
                                    <h3> Recipe Name </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3 pr-2">
                                            <input id="recn"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Product Name </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3">
                                            <input id="pname"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Tooling Drg. No. </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3">
                                            <input id="tooldrg"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Size </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3">
                                            <input id="size"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Thickness Range </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3 pr-2">
                                            <input id="thickness"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Weight Range </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3">
                                            <input id="weight"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Tablet Hardness </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3 pr-2">
                                            <input id="hardness"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Fill Depth LHS </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3">
                                            <input id="depthL"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex flex-col">
                                    <h3> Fill Depth RHS </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3 pr-2">
                                            <input id="depthR"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Comp Force LHS </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3">
                                            <input id="forceL"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Comp Force RHS </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3">
                                            <input id="forceR"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Roller Position Pre LHS </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3 pr-2">
                                            <input id="preL"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex flex-col">
                                    <h3> Roller Position Pre RHS </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3">
                                            <input id="preR"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Roller Position Main LHS </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3 pr-2">
                                            <input id="mainL"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col">
                                    <h3> Roller Position Main RHS </h3>
                                    <div class="flex flex-row">
                                        <div class="py-3">
                                            <input id="mainR"
                                                class="bg-white border-gray-500 shadow focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-2 block w-full"
                                                type="text" placeholder="">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="formedit" class="flex grid grid-cols-4 hidden">

                                <div class="flex flex-wrap p-3">
                                    <div class="">
                                        <button
                                            class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 w-44 border border-blue-500 hover:border-transparent rounded"
                                            onclick="updaterec()">
                                            UPDATE
                                        </button>
                                    </div>
                                </div>

                                <!-- <div class="flex flex-wrap p-3">
                                    <div class="">
                                        <button
                                            class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 w-44 border border-blue-500 hover:border-transparent rounded"
                                            onclick="deactivateuser()">
                                            Deactivate
                                        </button>
                                    </div>
                                </div>

                                <div class="flex flex-wrap p-3">
                                    <div class="">
                                        <button
                                            class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 w-44 border border-blue-500 hover:border-transparent rounded"
                                            onclick="unblockuser()">
                                            Unblock
                                        </button>
                                    </div>
                                </div> -->

                                <div class="flex flex-wrap p-3">
                                    <div class="">
                                        <button
                                            class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 w-44 border border-blue-500 hover:border-transparent rounded"
                                            onclick="deleterec()">
                                            Delete
                                        </button>
                                    </div>
                                </div>

                                <div class="flex flex-wrap p-3">
                                    <div class="">
                                        <button id="generatepdfreport2"
                                            class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 w-44 border border-blue-500 hover:border-transparent rounded"
                                            onclick="pdfsinglerec()">
                                            PDF 
                                        </button>
                                    </div>
                                </div>

                                <div class="flex flex-wrap p-3">
                                    <div class="">
                                        <button id="pdfsingleandprintrecid"
                                            class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 w-44 border border-blue-500 hover:border-transparent rounded"
                                            onclick="pdfsingleandprintrec()">
                                            Print PDF 
                                        </button>
                                    </div>
                                </div>

                            </div>

                            <div id="formadd" class="flex grid grid-cols-2 hidden">

                                <div class="flex flex-wrap p-3">
                                    <div class="">
                                        <button
                                            class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-2 w-44 border border-blue-500 hover:border-transparent rounded"
                                            onclick="submitrec()">
                                            ADD 
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>



                    </div>


                </div>

            </div>
        </div>

        <div class="1">

            <!--Graph Content -->
            <div id="main-content" class="w-full flex-1">

                <div class="flex flex-1 flex-wrap">
                    <div class="w-full p-2 ">

                        <div class="max-w-full">

                            <!-- Rotation Avg List -->
                            <div class="w-full h-screen max-h-screen p-3">
                                <div class="border border-gray-400 rounded shadow overflow-auto">
                                    <div class="px-5 pb-5">
                                        <table class="table-fixed w-full text-center text-black" height="170rem">
                                            <thead>
                                                <tr>
                                                    <th class="text-center border-b py-3">Sr. No.</th>
                                                    <th class="text-center border-b py-3">Recipe Name</th>
                                                    <th class="text-center border-b py-3">Product Name</th>
                                                    <th class="text-center border-b py-3">Tooling Drg. No.</th>
                                                    <th class="text-center border-b py-3">Size</th>
                                                    <th class="text-center border-b py-3">Thickness Range</th>
                                                    <th class="text-center border-b py-3">Weight Range</th>
                                                    <th class="text-center border-b py-3">Tablet Hardness</th>
                                                    <th class="text-center border-b py-3">Fill Depth LHS</th>
                                                    <th class="text-center border-b py-3">Fill Depth RHS</th>
                                                    <th class="text-center border-b py-3">Comp Force LHS</th>
                                                    <th class="text-center border-b py-3">Comp Force RHS</th>
                                                    <th class="text-center border-b py-3">Roller Position Pre LHS</th>
                                                    <th class="text-center border-b py-3">Roller Position Pre RHS</th>
                                                    <th class="text-center border-b py-3">Roller Position Main LHS</th>
                                                    <th class="text-center border-b py-3">Roller Position Main RHS</th>
                                                </tr>
                                            </thead>

                                            <tbody id="userlist">

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Hide divs scripts -->
    <script>
        async function searchuser() {

            const div1 = document.getElementById("form").classList.toggle('hidden');
            const div2 = document.getElementById("formedit").classList.toggle('hidden');

        }
        async function addrec() {
            const div1 = document.getElementById("form").classList.toggle('hidden');
            const div2 = document.getElementById("formadd").classList.toggle('hidden');
        }
    </script>

    <!-- Populate Table -->
    <script>
        // level()
        async function level() {

            let submiturl = `http://localhost:3000/recipies`
            var batchlistt

            await fetch(submiturl)
                .then((resp) => resp.json())
                .then(function (data) {
                    batchlistt = data
                    console.log(data)
                })
                .catch(console.error);

            // console.log(batch);


            loadbatchlist();

            function loadbatchlist() {
                const batchListBody = document.getElementById('userlist');
                let batchHTML = '';
                var i = 0
                var dataa
                for (let batchh of batchlistt) {
                    dataa = batchlistt[i]
                    // console.log(dataa.id)
                    batchHTML += `<tr><td class="border border-gray-400 px-4 py-2">${i+1}</td><td class="border border-gray-400 px-4 py-2">${dataa.recn}</td><td class="border border-gray-400 px-4 py-2">${dataa.pname}</td><td class="border border-gray-400 px-4 py-2">${dataa.tooldrg}</td><td class="border border-gray-400 px-4 py-2">${dataa.size}</td><td class="border border-gray-400 px-4 py-2">${dataa.thickness}</td><td class="border border-gray-400 px-4 py-2">${dataa.weight}</td><td class="border border-gray-400 px-4 py-2">${dataa.hardness}</td><td class="border border-gray-400 px-4 py-2">${dataa.depthL}</td><td class="border border-gray-400 px-4 py-2">${dataa.depthR}</td><td class="border border-gray-400 px-4 py-2">${dataa.forceL}</td><td class="border border-gray-400 px-4 py-2">${dataa.forceR}</td><td class="border border-gray-400 px-4 py-2">${dataa.preL}</td><td class="border border-gray-400 px-4 py-2">${dataa.preR}</td><td class="border border-gray-400 px-4 py-2">${dataa.mainL}</td><td class="border border-gray-400 px-4 py-2">${dataa.mainR}</td></tr>`
                    i++
                }

                batchListBody.innerHTML = batchHTML;
            }
        }

        level()

    </script>

    <!-- User add scripts -->
    <script>
        function isEmpty(obj) {
            for (let key in obj) {
                return false;
            }
            return true;
        }

        async function submitrec() {
            
            let submiturl = `http://localhost:3000/recipiename/${document.getElementById("recn").value}`
            console.log(udata)

            await fetch(submiturl)
                .then((resp) => resp.json())
                .then(function (data) {
                    if (isEmpty(data) == false) {
                        console.log(data)
                        alert("Recipe already exists.")
                    } else if (isEmpty(data) == true) {
                        udata.recn = document.getElementById("recn").value
                        udata.pname = document.getElementById("pname").value
                        udata.tooldrg = document.getElementById("tooldrg").value
                        udata.size = document.getElementById("size").value
                        udata.thickness = document.getElementById("thickness").value
                        udata.weight = document.getElementById("weight").value
                        udata.hardness = document.getElementById("hardness").value
                        udata.depthL = document.getElementById("depthL").value
                        udata.depthR = document.getElementById("depthR").value
                        udata.forceL = document.getElementById("forceL").value
                        udata.forceR = document.getElementById("forceR").value
                        udata.preL = document.getElementById("preL").value
                        udata.preR = document.getElementById("preR").value
                        udata.mainL = document.getElementById("mainL").value
                        udata.mainR = document.getElementById("mainR").value

                        let url = `http://localhost:3000/recipies`

                        console.log(udata)
                        fetch(url, {
                            method: 'POST', // or 'PUT'
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(udata),
                        })
                            .then(() => {
                                alert("Recipe added.")
                                setTimeout(() => {
                                    location.reload();
                                }, 200);
                            })
                            .catch((error) => {
                                console.error('Error:', error);
                            });
                    }
                })
                .catch(console.error);
        }

    </script>

    <!-- search user -->
    <script>

        function isEmpty(obj) {
                for (let key in obj) {
                    return false;
                }
                return true;
            }

        var searchid
        async function srec() {
            var username = document.getElementById("susername").value
            let url1 = `http://localhost:3000/api/searchedrecipe_name/${username}`
            fetch(url1)
                .catch(console.error);

            let url = `http://localhost:3000/recipiename/${username}`

            fetch(url)
                .then((resp) => resp.json())
                .then(function (data) {
                    if (isEmpty(data) == false) {
                        searchuser()
                        // console.log(data)
                        searchid = data[0].id
                        document.getElementById("recn").value = data[0].recn
                        document.getElementById("pname").value = data[0].pname
                        document.getElementById("tooldrg").value = data[0].tooldrg
                        document.getElementById("size").value = data[0].size
                        document.getElementById("thickness").value = data[0].thickness
                        document.getElementById("weight").value = data[0].weight
                        document.getElementById("hardness").value = data[0].hardness
                        document.getElementById("depthL").value = data[0].depthL
                        document.getElementById("depthR").value = data[0].depthR
                        document.getElementById("forceL").value = data[0].forceL
                        document.getElementById("forceR").value = data[0].forceR
                        document.getElementById("preL").value = data[0].preL
                        document.getElementById("preR").value = data[0].preR
                        document.getElementById("mainL").value = data[0].mainL
                        document.getElementById("mainR").value = data[0].mainR
                    } else if (isEmpty(data) == true) {
                        alert("Recipe does not exist.")
                    }
                })
                .catch(console.error);

        }
    </script>

    <!-- update user -->
    <script>

        var udata = {
            username: "m123",
            userlevel: "1",
            name: "Maruti2 Muthu",
            password: "pas2s123",
            attempts: "102",
            expiry: "32"
        }

        async function updaterec() {
            udata.recn = document.getElementById("recn").value
            udata.pname = document.getElementById("pname").value
            udata.tooldrg = document.getElementById("tooldrg").value
            udata.size = document.getElementById("size").value
            udata.thickness = document.getElementById("thickness").value
            udata.weight = document.getElementById("weight").value
            udata.hardness = document.getElementById("hardness").value
            udata.depthL = document.getElementById("depthL").value
            udata.depthR = document.getElementById("depthR").value
            udata.forceL = document.getElementById("forceL").value
            udata.forceR = document.getElementById("forceR").value
            udata.preL = document.getElementById("preL").value
            udata.preR = document.getElementById("preR").value
            udata.mainL = document.getElementById("mainL").value
            udata.mainR = document.getElementById("mainR").value

            let submiturl = `http://localhost:3000/recipies/${searchid}`

            fetch(submiturl, {
                method: 'PUT', // or 'PUT'
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(udata),
            })
                .then(() => {
                    alert("Recipe updated.")
                    setTimeout(() => {
                        location.reload();
                    }, 200);
                })
                .catch((error) => {
                    console.error('Error:', error);
                });

            
        }

        async function deleterec() {
            // console.log(searchid)

            let submiturl = `http://localhost:3000/recipies/${searchid}`

            fetch(submiturl, {
                method: 'DELETE', // or 'PUT'
                // headers: {
                //     'Content-Type': 'application/json',
                // },
                // body: JSON.stringify(udata),
            })
                .then(() => {
                    alert("Recipe deleted.")
                    setTimeout(() => {
                        location.reload();
                    }, 200);
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }

    </script>

    <!-- export pdf -->

    <script>
        var element1 = document.getElementById("generatepdfreport1");
        var element2 = document.getElementById("generatepdfreport2");

        async function reportrec() {
            let pdfgenerationtime = 5000
            // document.getElementById("generatepdfreport1").innerText = `PLEASE WAIT ${pdfgenerationtime/1000} secs`;
            document.getElementById("generatepdfreport1").innerText = `PLEASE WAIT`;
            element1.classList.add("cursor-not-allowed");

            await fetch(reportRecipeGenURL);

            setTimeout(() => {
                location.href = "/report/recipe/download"
                document.getElementById("generatepdfreport1").innerText = "Recipe PDF";
                element1.classList.remove("cursor-not-allowed");
            }, pdfgenerationtime);
        }
        
        async function pdfsinglerec() {
            let pdfgenerationtime = 5000
            // document.getElementById("generatepdfreport1").innerText = `PLEASE WAIT ${pdfgenerationtime/1000} secs`;
            document.getElementById("generatepdfreport2").innerText = `PLEASE WAIT`;
            element2.classList.add("cursor-not-allowed");

            await fetch(reportRecipeSingleGenURL);

            setTimeout(() => {
                location.href = "/report/recipe_single/download"
                document.getElementById("generatepdfreport2").innerText = "PDF";
                element2.classList.remove("cursor-not-allowed");
            }, pdfgenerationtime);
        }

        async function reportandprintrec() {
            let pdfgenerationtime = 5000
            // document.getElementById("generatepdfreport1").innerText = `PLEASE WAIT ${pdfgenerationtime/1000} secs`;
            document.getElementById("reportandprintrecid").innerText = `PLEASE WAIT`;
            element1.classList.add("cursor-not-allowed");

            await fetch(reportRecipeGenURL);

            setTimeout(() => {
                var download = `${hostname}/path/recipe/download`
                fetch(download)
                    .then((resp) => resp.json()) // Transform the data into json
                    .then(function (data) {
                        console.log(data.path);
                        printJS({ printable: `${hostname}/base/${data.path}`, type: 'pdf' });
                    })
                    .catch(function (error) {
                    });
                // location.href = "/report/recipe/download"
                document.getElementById("reportandprintrecid").innerText = "Print Recipe";
                element1.classList.remove("cursor-not-allowed");
            }, pdfgenerationtime);
        }
        
        async function pdfsingleandprintrec() {
            let pdfgenerationtime = 5000
            // document.getElementById("generatepdfreport1").innerText = `PLEASE WAIT ${pdfgenerationtime/1000} secs`;
            document.getElementById("pdfsingleandprintrecid").innerText = `PLEASE WAIT`;
            element2.classList.add("cursor-not-allowed");

            await fetch(reportRecipeSingleGenURL);

            setTimeout(() => {
                var download = `${hostname}/path/recipe_single/download`
                fetch(download)
                    .then((resp) => resp.json()) // Transform the data into json
                    .then(function (data) {
                        console.log(data.path);
                        printJS({ printable: `${hostname}/base/${data.path}`, type: 'pdf' });
                    })
                    .catch(function (error) {
                    });
                // location.href = "/report/recipe_single/download"
                document.getElementById("pdfsingleandprintrecid").innerText = "Print PDF";
                element2.classList.remove("cursor-not-allowed");
            }, pdfgenerationtime);
        }
    </script>
</body>

</html>
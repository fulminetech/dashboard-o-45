<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report</title>

    <link href="/css/tailwind.css" rel="stylesheet">
    <script src="/env/env.js"></script>

</head>

<body onload="searchBatch()">


    <h3 class="px-10 py-2 text-gray-700 text-left">Batch Number:
        <a id="batch_number_metric" class="font-bold text-gray-900">
        </a>
    </h3>
    <h3 class="px-10 py-2 text-gray-700 text-left">From (rotation number):
        <a id="from" class="font-bold text-gray-900">
        </a>
    </h3>
    <h3 class="px-10 py-2 text-gray-700 text-left">To (rotation number):
        <a id="to" class="font-bold text-gray-900">
        </a>
    </h3>

    <div class="px-2 pt-2 pb-5">
        <table class="table-auto w-full text-center text-gray-900" height="170rem">
            <thead>
                <tr>
                    <th class="text-center border-b py-3">Rtn</th>
                    <th class="text-center border-b py-3">1</th>
                    <th class="text-center border-b py-3">2</th>
                    <th class="text-center border-b py-3">3</th>
                    <th class="text-center border-b py-3">4</th>
                    <th class="text-center border-b py-3">5</th>
                    <th class="text-center border-b py-3">6</th>
                    <th class="text-center border-b py-3">7</th>
                    <th class="text-center border-b py-3">8</th>
                    <th class="text-center border-b py-3">9</th>
                    <th class="text-center border-b py-3">11</th>
                    <th class="text-center border-b py-3">12</th>
                    <th class="text-center border-b py-3">13</th>
                    <th class="text-center border-b py-3">14</th>
                    <th class="text-center border-b py-3">15</th>
                    <th class="text-center border-b py-3">16</th>
                    <th class="text-center border-b py-3">17</th>
                    <th class="text-center border-b py-3">18</th>
                    <th class="text-center border-b py-3">19</th>
                    <th class="text-center border-b py-3">20</th>
                    <th class="text-center border-b py-3">21</th>
                    <th class="text-center border-b py-3">22</th>
                    <th class="text-center border-b py-3">23</th>
                    <th class="text-center border-b py-3">24</th>
                    <th class="text-center border-b py-3">25</th>
                    <th class="text-center border-b py-3">26</th>
                    <th class="text-center border-b py-3">27</th>
                    <th class="text-center border-b py-3">28</th>
                    <th class="text-center border-b py-3">29</th>
                    <th class="text-center border-b py-3">30</th>
                    <th class="text-center border-b py-3">31</th>
                    <th class="text-center border-b py-3">32</th>
                    <th class="text-center border-b py-3">33</th>
                    <th class="text-center border-b py-3">34</th>
                    <th class="text-center border-b py-3">35</th>
                    <th class="text-center border-b py-3">36</th>
                    <th class="text-center border-b py-3">37</th>
                    <th class="text-center border-b py-3">38</th>
                    <th class="text-center border-b py-3">39</th>
                    <th class="text-center border-b py-3">40</th>
                    <th class="text-center border-b py-3">41</th>
                    <th class="text-center border-b py-3">42</th>
                    <th class="text-center border-b py-3">43</th>
                    <th class="text-center border-b py-3">44</th>
                    <th class="text-center border-b py-3">45</th>

                </tr>
            </thead>
            <tbody id="avgtable">
            </tbody>
        </table>
    </div>

    <!-- Generate report -->
    <script>

        async function searchBatch() {

            const reportData1 = await fetch(reportdetailsURL);
            const report = await reportData1.json();
            console.log(report)
            var t = "ejnRHS"

            let from = report.from;
            let to = report.to;

            document.getElementById("from").innerHTML = from;
            document.getElementById("to").innerHTML = to;

            document.getElementById("batch_number_metric").innerHTML = report.batch;

            // const queryAvgURL = `${hostname}/api/search/average/csv/${report.batch}`
            var queryAvgURL = `${reportcsvURL}/${t}/${report.batch}/${from}/${to}`;

            const avgData = await fetch(queryAvgURL);
            const avggbatch = await avgData.json();

            // console.log(avggbatch)
            
            let avglistt = avggbatch.data;
            // console.log(avglistt)
            

            function loadavglist() {
                const avgListBody = document.getElementById('avgtable');
                let avgHTML = '';

                let i = -1;

                for (let avgg of avglistt) {
                    i++;
                    let avgdataa = avglistt[i]
                    avgHTML += `<tr><td class="border border-gray-500 px-2">${avgdataa[1]}</td><td class="border border-gray-500 px-1">${avgdataa[2]}</td><td class="border border-gray-500 px-1">${avgdataa[3]}</td><td class="border border-gray-500 px-1">${avgdataa[4]}</td><td class="border border-gray-500 px-1">${avgdataa[5]}</td><td class="border border-gray-500 px-1">${avgdataa[6]}</td><td class="border border-gray-500 px-1">${avgdataa[7]}</td><td class="border border-gray-500 px-1">${avgdataa[8]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[9]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[10]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[11]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[12]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[13]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[14]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[15]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[16]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[17]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[18]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[19]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[20]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[21]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[22]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[23]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[24]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[25]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[26]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[27]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[28]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[29]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[30]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[31]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[32]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[33]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[34]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[35]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[36]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[37]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[38]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[39]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[40]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[41]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[42]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[43]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[44]}</td>
                            <td class="border border-gray-500 px-1">${avgdataa[45]}</td>
                            </tr>`
                }

                avgListBody.innerHTML = avgHTML;
            }

            loadavglist();
        }


    </script>
</body>

</html>